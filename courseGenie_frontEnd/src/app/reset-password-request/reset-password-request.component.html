<div class="container guest-container py-5">
  <div class="card centered-card shadow rounded-4 overflow-hidden border-0">
    <div class="row g-0">
      <!-- Left column with background image -->
      <div class="col-6">
        <div class="reset-password-request-bg h-100 d-flex align-items-center justify-content-center rounded-start" style="background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);">
          <div class="text-center p-4 text-white">
            <h2 class="fw-bold mb-3">Forgot Your Password?</h2>
            <p class="opacity-75">Reset it and get back on track.</p>
          </div>
        </div>
      </div>

      <!-- Right column with form -->
      <div class="col-6">
        <div class="guest-form-container p-4 p-md-5">
          <h1 class="fw-bold mb-2">Reset Password</h1>
          <p class="text-secondary mb-4">Enter your details to reset your password</p>

          <form #resetForm="ngForm" (ngSubmit)="onSubmit(resetForm)" novalidate>
            <!-- Username -->
            <div class="form-group mb-4">
              <label for="username" class="form-label fw-semibold mb-2">Username</label>
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-person"></i>
                </span>
                <input
                  type="text"
                  id="username"
                  name="username"
                  class="input-field"
                  [(ngModel)]="username"
                  required
                  #usernameField="ngModel"
                />
              </div>
              <div class="error-message small text-danger mt-1" *ngIf="usernameField.invalid && usernameField.touched">
                Username is required.
              </div>
            </div>

            <!-- Old Password -->
            <div class="form-group mb-4">
              <label for="oldPassword" class="form-label fw-semibold mb-2">Old Password</label>
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-lock"></i>
                </span>
                <input
                  type="password"
                  id="oldPassword"
                  name="oldPassword"
                  class="input-field"
                  [(ngModel)]="oldPassword"
                  required
                  #oldPasswordField="ngModel"
                />
              </div>
              <div class="error-message small text-danger mt-1" *ngIf="oldPasswordField.invalid && oldPasswordField.touched">
                Old password is required.
              </div>
            </div>

            <!-- New Password -->
            <div class="form-group mb-4">
              <label for="newPassword" class="form-label fw-semibold mb-2">New Password</label>
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-shield-lock"></i>
                </span>
                <input
                  type="password"
                  id="newPassword"
                  name="newPassword"
                  class="input-field"
                  [(ngModel)]="newPassword"
                  (ngModelChange)="checkPasswordStrength()"
                  required
                  #newPasswordField="ngModel"
                />
              </div>

              <!-- Password Strength -->
              <div class="strength-bar mt-2">
                <div
                  [ngStyle]="{ 'width.%': passwordStrengthPercent, 'background-color': strengthBarColor }"
                  class="strength-fill"
                ></div>
              </div>

              <ul class="validation-list mt-2">
                <li [class.valid]="hasMinLength">At least 8 characters</li>
                <li [class.valid]="hasUppercase">At least one uppercase letter</li>
                <li [class.valid]="hasLowercase">At least one lowercase letter</li>
                <li [class.valid]="hasNumber">At least one number</li>
                <li [class.valid]="hasSpecialChar">At least one special character (e.g. !, &#64;, #, $)</li>
              </ul>
            </div>

            <!-- Confirm New Password -->
            <div class="form-group mb-4">
              <label for="confirmPassword" class="form-label fw-semibold mb-2">Confirm New Password</label>
              <div class="input-group">
                <span class="input-icon">
                  <i class="bi bi-shield-check"></i>
                </span>
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  class="input-field"
                  [(ngModel)]="confirmPassword"
                  required
                  #confirmPasswordField="ngModel"
                />
              </div>
              <div class="error-message small text-danger mt-1" *ngIf="confirmPasswordField.touched && confirmPassword !== newPassword">
                Passwords do not match.
              </div>
            </div>

            <!-- Submit -->
            <button
              type="submit"
              class="btn btn-primary w-100 py-2 mt-2 fw-semibold d-flex align-items-center justify-content-center"
              [disabled]="resetForm.invalid"
              style="background: linear-gradient(to right, #2575fc, #6a11cb); border: none;"
            >
              Reset Password
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
