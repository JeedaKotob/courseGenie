<div class="nav-layout">
  <!-- Side Menu with hover expansion only -->
  <div class="side-menu" [class.expanded]="isHovered"
       (mouseenter)="isHovered = true" (mouseleave)="isHovered = false">
    <div class="sidebar-header">
      <!-- Logo - changes based on hover state -->
      <div class="logo">
        <a routerLink="/" class="logo-link">

          <img *ngIf="isHovered" class="logo-image full-logo"
               ngSrc="../../assets/courseGenie-logo.svg" alt="CourseGenie Logo" height="500" width="500">
          <img *ngIf="!isHovered" class="logo-image icon-logo"
               src="../../assets/CourseGenie_Symbol.png" alt="CG" height="70" width="70">
        </a>
      </div>
    </div>

    <!-- Menu Items -->
    <ul class="menu-list">
      <li
        *ngFor="let item of menuItems"
        class="menu-item"
        [class.selected]="isSelected(item)"
      >
        <!-- Main Item -->
        <div
          class="menu-list-item"
          (click)="item.submenu ? toggleMenu(item.label) : selectItem(item)"
        >
          <i class="{{ item.icon }}"></i>
          <span class="menu-text" *ngIf="isHovered">{{ item.label }}</span>
          <i
            *ngIf="item.submenu && isHovered"
            class="pi chevron-icon"
            [ngClass]="openMenus.includes(item.label) ? 'pi-chevron-down' : 'pi-chevron-right'"
          ></i>
        </div>

        <!-- Submenu - shown only when expanded by hover -->
        <ul *ngIf="item.submenu && openMenus.includes(item.label) && isHovered" class="submenu">
          <li
            *ngFor="let subItem of item.submenu"
            class="submenu-item"
            [class.selected]="isSelected(subItem)"
            (click)="selectItem(subItem)"
          >
            <i class="{{ subItem.icon }}"></i>
            <span>{{ subItem.label }}</span>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content" [class.expanded]="!isHovered">
    <!-- Navbar -->
    <div class="navbar">
      <div class="user-profile" (click)="toggleDropdown($event)">
        <div class="avatar-circle">
          {{ getInitials() }}
        </div>
        <span class="user-name">{{ currentUser?.firstName }} {{ currentUser?.lastName }}</span>
        <i class="pi pi-chevron-down ms-2"></i>

        <!-- Dropdown Menu -->
        <div class="custom-dropdown shadow" *ngIf="isDropdownOpen">
          <div class="dropdown-item logout-item" (click)="doLogout()">
            <i class="bi bi-box-arrow-right me-2"></i>Logout
          </div>
        </div>
      </div>
    </div>

    <!-- Page Content -->
    <div class="content" *ngIf="sharedValue != null">
      <router-outlet></router-outlet>
    </div>
  </div>
</div>
